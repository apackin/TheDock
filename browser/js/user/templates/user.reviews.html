<div class="container">
    <h2 class="text-center">Reviews by {{ user.fullname || user.username || user.email}}</h2>
    <div class="panel panel-info">
        <div class="panel-body list-group" ng-show="areThereUserReviews()">
            <!-- want to add functionality so that you will be asked if you try to leave the page without saving changes -->
            <uib-alert ng-show="success" class="alert" type="success" role="alert">Your changes were saved successfully!</uib-alert>
            <br>
            <span class="list-group-item" ng-repeat="review in reviews" ng-show="!isReviewEditable()">
                <a ui-sref="product({productId: review.product._id})">
                	<h4 class="list-group-item-heading">{{ review.product.title }}</h4> 
                </a>
                <uib-rating ng-model="review.starRating" data-readonly="true" max="5"></uib-rating>
                <a style="float: right" href="">
					<span class="glyphicon glyphicon-pencil" aria-hidden="true" ng-click="editReview(review)"></span>
				</a>
                <div>
                    <span class="list-group-item-text" style="width: 90%" name="content">{{ review.content }}</span>
                </div>
            </span>
            <form name="editReviewForm" ng-submit="updateReview(review)" ng-show="isReviewEditable()">
                <a style="float: right" href="">
					<span class="glyphicon glyphicon-remove" aria-hidden="true" ng-click="allReviews()"></span>
				</a>
				<a ui-sref="product({productId: review.product._id})">
            		<h4 class="list-group-item-heading">{{ review.product.title }}</h4> 
                </a>
                <uib-rating ng-model="review.starRating" name="starRating" data-readonly="false" max="5"></uib-rating>
                <div>
                    <input class="list-group-item-text" style="width: 90%" ng-minlength="10" ng-model="review.content" name="content"></input>
                </div>
                <br>
                <div>
                    <uib-alert ng-show="(editReviewForm.$dirty && editReviewForm.$error.minlength)" class="alert" type="danger" role="alert">Please enter a review that is at least 10 characters long</uib-alert>
                </div>
                <br>
                <button type="submit" class="btn btn-submit" ng-disabled="(editReviewForm.$dirty && editReviewForm.$invalid)">Save Changes</button>
			</form> 
			<br>

			<uib-alert ng-show="failure" class="alert" type="danger" role="alert">Your changes were NOT saved</uib-alert>
        </div>
    </div>
</div>